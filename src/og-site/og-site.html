<link rel="import" href="../../bower_components/polymer/polymer.html" />
<link rel="import" href="../../bower_components/app-route/app-location.html">
<link rel="import" href="../../bower_components/app-route/app-route.html" />
<link rel="import" href="../../bower_components/iron-pages/iron-pages.html" />
<link rel="import" href="../../bower_components/paper-dialog/paper-dialog.html" />
<link rel="import" href="../../bower_components/paper-button/paper-button.html" />
<link rel="import" href="../../bower_components/neon-animation/animations/scale-up-animation.html" />
<link rel="import" href="../../bower_components/neon-animation/animations/scale-down-animation.html" />
<link rel="import" href="../shared-styles/shared-styles.html" />
<link rel="import" href="../og-behaviors/og-behaviors.html" />
<link rel="import" href="../og-header/og-header.html" />
<link rel="import" href="../og-portfolio/og-portfolio.html" />
<link rel="import" href="../og-blog/og-blog.html" />
<link rel="import" href="../og-about/og-about.html" />
<link rel="import" href="../og-contact/og-contact.html" />
<link rel="import" href="../og-footer/og-footer.html" />
<link rel="import" href="../og-error-404/og-error-404.html" />

<dom-module id="og-site">
  <template>
    <style include="shared-styles">
      :host {
        display: block;
      }

      iron-pages {
        margin-top: 4rem;
      }
    </style>
    <app-location route="{{route}}"></app-location>
    <app-route
      route="{{route}}"
      pattern="/:view"
      data="{{routeData}}"
      tail="{{subroute}}"></app-route>
    <og-header></og-header>
    <main>
      <iron-pages selected="[[routeData.view]]" attr-for-selected="name" fallback-selection="error-404">
        <og-about name="about"></og-about>
        <og-portfolio name=""></og-portfolio>
        <og-blog name="process-slides"></og-blog>
        <og-error-404 name="error-404"></og-error-404>
      </iron-pages>
    </main>
    <og-footer></og-footer>
  </template>

  <script>
    Polymer({

      is: 'og-site',

      properties: {},

      observers: [
        // '_routeChanged(route.*)',
        '_viewChanged(routeData.view)'
      ],

      // _routeChanged: function( route, subroute ) {
      //   console.log( 'route', route );
      // },

      _viewChanged: function( view ) {
        var $navLinks = document.querySelectorAll( 'og-header > nav > a' );
        $navLinks.forEach( function ( element ) {
          var route = element.getAttribute( 'href' ).substring(1);
          if ( route === view ) {
            element.classList.add( 'active' );
          } else {
            element.classList.remove( 'active' );
          }
        } );
      }
    });
  </script>
</dom-module>
