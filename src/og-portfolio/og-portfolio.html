<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="og-portfolio">
  <template>
    <style include="shared-styles">
      :host {
        display: block;
      }
    </style>
    <template is="dom-repeat" items="{{pieces}}" as="piece">
      <article>
        <img srcset="{{getSrcset(piece)}}" />
      </article>
    </template>
  </template>

  <script>
    Polymer({

      is: 'og-portfolio',

      hostAttributes: {
        role: 'article'
      },

      properties: {
        directory: {
          type: String,
          value: 'src/images/'
        },
        pieces: {
          type: Array,
          value: function () {
            return [
              // plant lab
              {
                "filenameId": "hydroponic",
                "resolutions": [
                  {
                    "width": "2000",
                    "height": "1080",
                    "filenameSuffix": "",
                    "types": [ "jpg", "png" ]
                  },
                  {
                    "width": "1000",
                    "height": "540",
                    "filenameSuffix": "@0,5x",
                    "types": [ "jpg" ]
                  },
                  {
                    "width": "500",
                    "height": "270",
                    "filenameSuffix": "@0,25x",
                    "types": [ "jpg" ]
                  }
                ],
                "title": "Hydroponic Artificial",
                "date": "2016-MM-DD"
              },
              // uncharted
              {
                "filenameId": "uncharted",
                "resolutions": [
                  {
                    "width": "2042",
                    "height": "1080",
                    "filenameSuffix": "",
                    "types": [ "jpg", "png" ]
                  },
                  {
                    "width": "1021",
                    "height": "540",
                    "filenameSuffix": "@0,5x",
                    "types": [ "jpg" ]
                  },
                  {
                    "width": "511",
                    "height": "270",
                    "filenameSuffix": "@0,25x",
                    "types": [ "jpg" ]
                  }
                ]
              },
              // car chase
              {
                "filenameId": "robbery",
                "resolutions": [
                  {
                    "width": "2100",
                    "height": "1160",
                    "filenameSuffix": "",
                    "types": [ "jpg", "png" ]
                  },
                  {
                    "width": "1050",
                    "height": "580",
                    "filenameSuffix": "@0,5x",
                    "types": [ "jpg" ]
                  },
                  {
                    "width": "525",
                    "height": "290",
                    "filenameSuffix": "@0,25x",
                    "types": [ "jpg" ]
                  }
                ]
              },
              // dead guy
              {
                "filenameId": "crackhouse",
                "resolutions": [
                  {
                    "width": "2826",
                    "height": "1527",
                    "filenameSuffix": "",
                    "types": [ "jpg", "png" ]
                  },
                  {
                    "width": "1413",
                    "height": "764",
                    "filenameSuffix": "@0,5x",
                    "types": [ "jpg" ]
                  },
                  {
                    "width": "707",
                    "height": "382",
                    "filenameSuffix": "@0,25x",
                    "types": [ "jpg" ]
                  }
                ]
              },
              // guy behind car
              {
                "filenameId": "shark",
                "resolutions": [
                  {
                    "width": "4224",
                    "height": "2160",
                    "filenameSuffix": "",
                    "types": [ "jpg", "png" ]
                  },
                  {
                    "width": "2112",
                    "height": "1080",
                    "filenameSuffix": "@0,5x",
                    "types": [ "jpg" ]
                  },
                  {
                    "width": "1056",
                    "height": "540",
                    "filenameSuffix": "@0,25x",
                    "types": [ "jpg" ]
                  }
                ]
              }
            ];
          }
        }
      },

      getSrc: function ogPortfolioGetSrc() {},

      getSrcset: function ogPortfolioGetSrcset( piece ) {
        /*
          {
            "width": "2000",
            "height": "1080",
            "filename-suffix": "",
            "types": [ "jpg", "png" ]
          }
        */
        // hydroponic-artificial.jpg 2000w
        // return piece.filenameId + '.jpg';
        // return piece[0];
        // return piece.filenameId + '.' + resolution.types[0] + ' ' + resolution.width + 'w';
        var srcset = '';
        // var ;
        var i = piece.resolutions.length - 1;

        for ( ; i >= 0; i--) {
          srcset += this.directory + piece.filenameId + '/' + piece.filenameId + piece.resolutions[i].filenameSuffix.replace( ',', '%2C' ) + '.' + piece.resolutions[i].types[0] + ' ' + piece.resolutions[i].width + 'w';
        
          if ( i !== 0 ) {
            srcset += ', ';
          }
        }

        return srcset;
      }
    });
  </script>
</dom-module>
