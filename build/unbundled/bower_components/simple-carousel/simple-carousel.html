<html><head><link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../../src/shared-styles/shared-styles.html">
<link rel="import" href="carousel-slide.html">
<link rel="import" href="animation-behavior.html">



</head><body><dom-module id="simple-carousel">
  <template>
    <style include="shared-styles">

      :host {
        display: block;
        position:relative;
        overflow:hidden;
      }

      :host ::content carousel-slide,
      :host ::content [carousel-slide],
      :host ::content [data-carousel-slide] {
        position:absolute;
        width:100%;
        left:0;
        top:0;
      }

      :host ::content carousel-slide:first-child,
      :host ::content [carousel-slide]:first-child,
      :host ::content [data-carousel-slide]:first-child {
          position:relative;
      }

      :host ::content carousel-slide:not([selected]),
      :host ::content [carousel-slide]:not([selected]),
      :host ::content [data-carousel-slide]:not([selected]) {
        display:none;
      }

      button {
        position: absolute;
        top: calc(50% - 20px);
        padding: 0;
        line-height: 40px;
        border: none;
        background: none;
        color: #DDD;
        font-size: 40px;
        font-weight: bold;
        cursor: pointer;
        opacity: 0.7;
      }

      button:hover,
      button:focus {
        opacity: 1;
      }

      #prevBtn {
        left: 12px;
      }

      #nextBtn {
        right: 12px;
      }

      button[disabled] {
        opacity: 0.4;
        cursor: default;
      }

      :host(.non-keyboard) :focus {
        outline: none !important;
      }
    </style>

    <div>
      <content select="carousel-slide, [carousel-slide], [data-carousel-slide]"></content>
    </div>

    <button id="prevBtn" on-click="previous" on-keyup="keyboardAdvancePrevious" tabindex="0">❮</button>
    <button id="nextBtn" on-click="next" on-keyup="keyboardAdvanceNext" tabindex="0">❯</button>


  </template>

  <script>Polymer({is:"simple-carousel",behaviors:[AnimationBehavior],properties:{selected:{type:Object,observer:"_selectedChanged"},infiniteLoop:{type:Boolean,value:!1},auto:{type:Boolean,value:!1},transitionTime:{type:Number,value:3e3},transitionDuration:{type:Number,value:500},showControls:{type:String,value:!0},transitionStyle:{type:String,value:"ease"}},ready:function(){this._autoStart(),"false"==this.showControls&&(this.$.prevBtn.style.display="none",this.$.nextBtn.style.display="none")},_autoStart:function(){if(this.auto){var e=this;this.intervalHander&&clearInterval(this.intervalHander),this.intervalHander=setInterval(function(){e.next()},this.transitionTime)}},attached:function(){this.selected=this.queryEffectiveChildren("carousel-slide, [carousel-slide], [data-carousel-slide]")},_selectedChanged:function(e,t){t&&t.removeAttribute("selected"),e&&e.setAttribute("selected",""),this.infiniteLoop||(this.$.prevBtn.disabled=!e.previousElementSibling,this.$.nextBtn.disabled=!e.nextElementSibling)},keyboardAdvancePrevious:function(e){32!==e.which&&13!==e.which||this.previous(e)},keyboardAdvanceNext:function(e){32!==e.which&&13!==e.which||this.next(e)},previous:function(e){var t=Polymer.dom(this);console.log("host",t),"keyup"===e.type||"keydown"===e.type||"keypress"===e.type?t.classList.remove("non-keyboard"):t.classList.add("non-keyboard");var i=this.selected.previousElementSibling;if(this._autoStart(),this.infiniteLoop&&!i){var s=this.queryAllEffectiveChildren("carousel-slide, [carousel-slide], [data-carousel-slide]");i=s[s.length-1]}i&&this._translateAnimation(i,-1)},next:function(e){var t=Polymer.dom(this);console.log("host",t),"keyup"===e.type||"keydown"===e.type||"keypress"===e.type?t.classList.remove("non-keyboard"):t.classList.add("non-keyboard");var i=this.selected.nextElementSibling;this._autoStart(),this.infiniteLoop&&!i&&(i=this.queryEffectiveChildren("carousel-slide, [carousel-slide], [data-carousel-slide]")),i&&this._translateAnimation(i,1)},stop:function(){clearInterval(this.intervalHander)},start:function(){this.infiniteLoop=!0,this._autoStart()}});</script>
</dom-module>
</body></html>